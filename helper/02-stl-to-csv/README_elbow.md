# 45度渐缩弯管STL生成器

这个程序使用CGAL库生成45度渐缩弯管（管径从一端到另一端逐渐变小，同时保持管壁厚度不变）的STL文件。

## 编译

确保系统已安装以下依赖项：
- CMake (版本 >= 3.8)
- CGAL库（版本 >= 5.0.3）

然后按照以下步骤进行编译：

```bash
mkdir build
cd build
cmake ..
make
```

编译成功后，可执行文件将被放置在当前目录中。

## 使用方法

程序默认生成一个45度渐缩弯管示例，但你可以通过命令行参数自定义参数：

```bash
./generate_tapered_elbow [选项]
```

### 命令行选项

- `--start-inner <value>`: 设置起始内半径（默认：0.8）
- `--start-outer <value>`: 设置起始外半径（默认：1.0）
- `--end-inner <value>`: 设置结束内半径（默认：0.5）
- `--end-outer <value>`: 设置结束外半径（默认：0.7）
- `--bend-radius <value>`: 设置弯管中心线的弯曲半径（默认：4.0）
- `--output <filename>`: 设置输出文件名（默认：tapered_elbow.stl）
- `--arc-sections <value>`: 设置沿弧长方向的分段数（默认：64）
- `--radial-sections <value>`: 设置截面径向的分段数（默认：48）

### 示例

生成一个弯曲半径为4.0，起始直径为2.0，结束直径为1.0，但保持管壁厚度不变的渐缩弯管：

```bash
./generate_tapered_elbow --start-inner 0.8 --start-outer 1.0 --end-inner 0.4 --bend-radius 4.0 --output my_elbow.stl
```

注意：
1. 不需要设置`--end-outer`参数，程序会自动计算以保持壁厚不变
2. 弯曲半径应该足够大（建议至少为外径的3倍），否则生成的弯管可能会畸形

## 技术说明

该程序使用以下步骤生成45度渐缩弯管：

1. 在XY平面上创建一个45度圆弧路径，圆心位于起始点正侧方
2. 沿着圆弧路径生成一系列垂直于路径的圆形截面
3. 从起始端到结束端，内径逐渐减小，同时保持管壁厚度不变
4. 使用四边形连接相邻截面上的对应点，形成完整的网格表面

**特别说明：**
- 如果提供的起始管壁厚度（外半径-内半径）与结束管壁厚度不同，程序会使用起始管壁厚度，并自动调整结束外半径
- 弯曲半径对弯管形状有重要影响，过小的弯曲半径会导致管道内侧压缩变形
- 建议弯曲半径至少为外径的3倍以上，以获得更美观的效果

## 坐标系说明

默认情况下：
- 起始端口位于X轴正方向
- 弯管在XY平面上沿逆时针方向弯曲45度
- 结束端口朝向Y轴正方向
- Z轴垂直于弯管平面

## 故障排除

如果生成的弯管看起来畸形：
1. 增加弯曲半径（最常见的解决方案）
2. 检查内外半径是否设置合理
3. 增加分段数，使弯管更加平滑 